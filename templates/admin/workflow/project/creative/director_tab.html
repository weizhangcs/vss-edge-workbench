{% extends "admin/change_form.html" %}
{% load i18n static unfold %}

{% block extrahead %}
    {{ block.super }}
    {# 引入统一样式 #}
    <link rel="stylesheet" href="{% static 'css/bundles/creative-director.css' %}">

    {# 隐藏 Unfold 默认 Form 元素 #}
    <style>
        .submit-row { display: none !important; }
        #content-main form { min-height: 600px; }
        /* 隐藏掉不需要的 Django Admin 元素 */
        .breadcrumbs { display: none; }
    </style>
{% endblock %}

{% block content %}
    {# 1. 数据桥接: 注入服务端数据 #}
    <script>
        window.SERVER_DATA = {{ server_data_json|default:"{}"|safe }};
    </script>

    {# 2. 挂载点 #}
    <div id="react-root" class="p-4 bg-gray-50 min-h-screen">
        <div class="p-12 text-center text-gray-400">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mb-2"></div>
            <p>正在启动导演驾驶舱...</p>
        </div>
    </div>

    {# 3. 引用 Vite 构建产物 (Module) #}
    <script type="module" src="{% static 'js/bundles/creative-director.js' %}"></script>
{% endblock %}